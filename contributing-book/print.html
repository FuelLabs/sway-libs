<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Contributing to Sway Libs</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Welcome</a></li><li class="chapter-item expanded "><a href="issues/index.html"><strong aria-hidden="true">2.</strong> GitHub Issues</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="issues/search.html"><strong aria-hidden="true">2.1.</strong> Searching for Issues</a></li><li class="chapter-item expanded "><a href="issues/filtering.html"><strong aria-hidden="true">2.2.</strong> Filtering by label</a></li><li class="chapter-item expanded "><a href="issues/assignment.html"><strong aria-hidden="true">2.3.</strong> Checking for available issues</a></li><li class="chapter-item expanded "><a href="issues/summary.html"><strong aria-hidden="true">2.4.</strong> Issue summary</a></li><li class="chapter-item expanded "><a href="issues/create-issue.html"><strong aria-hidden="true">2.5.</strong> Creating an Issue</a></li></ol></li><li class="chapter-item expanded "><a href="library-quality/index.html"><strong aria-hidden="true">3.</strong> Structure</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="library-quality/library-structure.html"><strong aria-hidden="true">3.1.</strong> Library Structure</a></li><li class="chapter-item expanded "><a href="library-quality/code-structure.html"><strong aria-hidden="true">3.2.</strong> Code Structure</a></li></ol></li><li class="chapter-item expanded "><a href="documentation/index.html"><strong aria-hidden="true">4.</strong> Documentation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="documentation/read-me.html"><strong aria-hidden="true">4.1.</strong> Read me</a></li></ol></li><li class="chapter-item expanded "><a href="code_docs/index.html"><strong aria-hidden="true">5.</strong> Code</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="code_docs/abi.html"><strong aria-hidden="true">5.1.</strong> ABI Documentation</a></li><li class="chapter-item expanded "><a href="code_docs/comments.html"><strong aria-hidden="true">5.2.</strong> Comments</a></li><li class="chapter-item expanded "><a href="code_docs/naming-components.html"><strong aria-hidden="true">5.3.</strong> Naming Components</a></li><li class="chapter-item expanded "><a href="code_docs/style.html"><strong aria-hidden="true">5.4.</strong> Style Guide</a></li><li class="chapter-item expanded "><a href="code_docs/specification.html"><strong aria-hidden="true">5.5.</strong> Specification</a></li></ol></li><li class="chapter-item expanded "><a href="testing/index.html"><strong aria-hidden="true">6.</strong> Testing</a></li><li class="chapter-item expanded "><a href="pull-requests/index.html"><strong aria-hidden="true">7.</strong> Pull Requests</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="pull-requests/commit.html"><strong aria-hidden="true">7.1.</strong> Committing your work</a></li><li class="chapter-item expanded "><a href="pull-requests/creating-pr.html"><strong aria-hidden="true">7.2.</strong> Creating a Pull Request</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Contributing to Sway Libs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/FuelLabs/sway-libs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome"><a class="header" href="#welcome">Welcome</a></h1>
<p>Thank you for taking the time to consider contributing to the project!</p>
<p>The aim of this guide is to introduce general concepts that can be taken across many projects in your professional career while directing them specifically at this project.</p>
<p>In this contributing guide, we will cover various topics starting from navigating GitHub issues to submitting a pull request for review.</p>
<p>We advise taking the time to carefully familiarize yourself with the content in each section. Every section has a purpose and it's likely that we will comment on any, if not all, sections in a pull request.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="github-issues"><a class="header" href="#github-issues">GitHub Issues</a></h1>
<p>GitHub provides a ticketing system called <a href="https://docs.github.com/en/issues">issues</a> which allows users to create and track the progress of tasks that need to be done.</p>
<p>When looking to contribute to a library one of the first places to look is their <a href="https://github.com/FuelLabs/sway-libs/issues">issues</a> section while following the guidance that the authors of the project have provided in their contributing document.</p>
<p>The issue should describe the work that needs to be done and the contributing document should outline the expectations that must be met in order for the work to eventually make its way into the repository.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="searching-for-issues"><a class="header" href="#searching-for-issues">Searching for Issues</a></h1>
<p>There are a few points to consider when looking for a task to contribute to.
The following sections provide a quickstart guide for navigating the issues in the Sway Libs repository.</p>
<h2 id="filtering-by-label"><a class="header" href="#filtering-by-label"><a href="issues/./filtering.html">Filtering by label</a></a></h2>
<p>Issues can be grouped into categories through the use of labels and depending on the category a user may choose to contribute to one task or another.</p>
<ul>
<li>Is it a bug fix, improvement, documentation etc.</li>
<li>Is it for the compiler, user interface, tooling etc.</li>
<li>Is the priority critical and must be resolved immediately or is it a low priority &quot;nice to have&quot;?</li>
</ul>
<h2 id="checking-for-available-issues"><a class="header" href="#checking-for-available-issues"><a href="issues/./assignment.html">Checking for available issues</a></a></h2>
<p>Once the issues are filtered a task can be selected if another user is not currently assigned to that task otherwise multiple people may be working on the same issue when only one solution can be chosen.</p>
<h2 id="issue-summary"><a class="header" href="#issue-summary"><a href="issues/./summary.html">Issue summary</a></a></h2>
<p>Each issue should have a description which provides context into the problem and what may be done to resolve it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filtering-by-label-1"><a class="header" href="#filtering-by-label-1">Filtering by label</a></h1>
<p>The default issues tab shows all of the issues that are currently open. GitHub already provides various search queries that can be made using the search bar however an easier way is to use the labels that the authors have provided to quickly filter for the relevant issues such as bugs, improvements, documentation, etc.</p>
<p>Under the <code>Label</code> tab you can select any number of labels and any issue that matches those labels will be shown while the other issues will be hidden.</p>
<p><img src="issues/../images/filter-dropdown.png" alt="Filter by label image" /></p>
<br>
<p>After clicking on the <code>Lib: Cryptography</code> label the issues have been filtered to show only the issues that have <code>Lib: Cryptography</code> added to them.</p>
<p>Notice that <code>Lib: Cryptography</code> is not the only label in the image below. If you wish to further reduce the number of presented issues then additional labels can be added in the same way.</p>
<p><img src="issues/../images/app-filter.png" alt="Filtering issues by an app label image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="checking-for-available-issues-1"><a class="header" href="#checking-for-available-issues-1">Checking for available issues</a></h1>
<p>It's important to check if anyone else is currently working on an particular issue to avoid performing duplicate work. Not only would this be frustrating but also be an inefficient use of time.</p>
<p>You can check whether someone is assigned to an issue by looking under the <code>Assignee</code> tab. If there is an icon, then someone is tasked with that issue. If there is no icon, then it's likely that no one is currently working on that issue and you're free to assign it to yourself or post a comment so that the author can assign you.</p>
<p><img src="issues/../images/app-filter-assignee.png" alt="Filtering issues by an app label image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="issue-summary-1"><a class="header" href="#issue-summary-1">Issue summary</a></h1>
<p>You can see the activity of an issue by looking at the number of comments. This doesn't really tell you much aside from that there is a discussion about what should be done.</p>
<p><img src="issues/../images/app-filter-comments.png" alt="Filtering issues by an app label image" /></p>
<p>Clicking on the issue near the bottom <code>Sum Merkle Proof Verification</code> we can see some information about the library with some information on what the library intends to implement and why it is needed.</p>
<p><img src="issues/../images/app-documentation.png" alt="Filtering issues by an app label image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-an-issue"><a class="header" href="#creating-an-issue">Creating an Issue</a></h1>
<p>If there is work that a project can benefit from then an issue can be filed via a template or a blank form.</p>
<p>We encourage the use of the provided templates because they guide a user into answering questions that we may have. The templates are not mandatory but they provide structure for answering questions like:</p>
<ul>
<li>What steps can be taken to reproduce the issue?</li>
<li>What feature is missing and how would you like it to work?</li>
<li>Is the improvement an improvement or a personal nitpick?</li>
</ul>
<br>
<p><img src="issues/../images/issue-templates.png" alt="Using issue templates image" /></p>
<br>
<p>The questions themselves are not that important, but what is important is providing as much detail about the task as possible. This allows other developers to come to a decision quickly and efficiently regarding the new issue.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="library-quality"><a class="header" href="#library-quality">Library Quality</a></h1>
<p>The quality of a library can be determined by a variety of measures such as intended utility or adoption. The metric that the following sections will focus on is developer experience.</p>
<p>In the following sections we will take a look at:</p>
<ul>
<li><a href="library-quality/library-structure.html">Library Structure</a>
<ul>
<li>The file structure and how easily a library may be navigated</li>
</ul>
</li>
<li><a href="library-quality/code-structure.html">Code Structure</a>
<ul>
<li>How to structure the code inside a file</li>
</ul>
</li>
<li><a href="library-quality/../documentation/index.html">Documentation</a>
<ul>
<li>How to present information about your library</li>
</ul>
</li>
<li><a href="library-quality/../testing/index.html">Testing</a>
<ul>
<li>The file structure and tips for testing</li>
</ul>
</li>
</ul>
<p>If the library is well structured, tested and documented then the developer experience will be good.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="library-structure"><a class="header" href="#library-structure">Library Structure</a></h1>
<p>In order to navigate through a library easily, there needs to be a structure that compartmentalizes concepts. This means that code is grouped together based on some concept.</p>
<p>Here is an example structure that we follow for <code>Sway</code> files in the <code>src</code> directory.</p>
<pre><code class="language-sway">src/
├── lib.sw
└── my_library/
    ├── data_structures.sw
    ├── errors.sw
    ├── events.sw
    ├── my_library.sw
    └── utils.sw
</code></pre>
<p>In the example above there are no directories, however, it may make sense for a project to categorize concepts differently such as splitting the <code>data_structures.sw</code> into a directory containing individual modules.</p>
<h2 id="data_structuressw"><a class="header" href="#data_structuressw">data_structures.sw</a></h2>
<p>Contains data structures written for your project.</p>
<ul>
<li>structs</li>
<li>enums</li>
<li>trait implementations</li>
</ul>
<h2 id="errorssw"><a class="header" href="#errorssw">errors.sw</a></h2>
<p>Contains enums that are used in <code>require(..., MyError::SomeError)</code> statements.
The enums are split into individual errors e.g. <code>DepositError</code>, <code>OwnerError</code> etc.</p>
<pre><code class="language-sway">pub enum MoveError {
    OccupiedSquare: (),
    OutOfBounds: (),
}
</code></pre>
<h2 id="eventssw"><a class="header" href="#eventssw">events.sw</a></h2>
<p>Contains structs definitions which are used inside <code>log()</code> statements.</p>
<pre><code class="language-sway">pub struct WinnerEvent {
    player: Identity,
}
</code></pre>
<h2 id="my_librarysw"><a class="header" href="#my_librarysw">my_library.sw</a></h2>
<p>This is the core of your library. It will host anything that is exposed for developers to use with an Application Binary Interface (<code>ABI</code>) as well as functions contracts or other libraries may call. You can think of this as the entry point which all other devs will use to interact with the library.</p>
<h2 id="utilssw"><a class="header" href="#utilssw">utils.sw</a></h2>
<p>Any private functions (helper functions) that your contracts use inside their functions.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="code-structure"><a class="header" href="#code-structure">Code Structure</a></h1>
<p>Structuring code in a way that is easy to navigate allows for a greater developer experience. In order to achieve this, there are some guidelines to consider.</p>
<ol>
<li>Fields in all structures should be alphabetical</li>
<li>Functions should be declared by the weight of their purity e.g.
<ol>
<li><code>read &amp; write</code> first</li>
<li><code>read</code> second</li>
<li><code>pure</code> last</li>
</ol>
</li>
<li>Structures should be grouped into modules and the content inside should be alphabetically ordered</li>
<li>Dependencies and imports should be alphabetical</li>
<li>Document the parameters of the interface in alphabetical order and preferably declare them in the same order in the function signature</li>
</ol>
<p>An important aspect to remember is to use the formatter(s) to format the code prior to a commit.</p>
<ul>
<li><code>cargo fmt</code> to format <code>Rust</code> files</li>
<li><code>forc fmt</code> to format <code>Sway</code> files</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="documentation"><a class="header" href="#documentation">Documentation</a></h1>
<p>Documentation is arguably the most important aspect of any open source project because it educates others about how the project works, how to use it, how to contribute etc.</p>
<p>Good documentation enables frictionless interaction with the project which in turn may lead to a greater userbase, including contributors, which causes a positive feedback loop.</p>
<p>In the following sections we will take a look at how to document the:</p>
<ul>
<li><a href="documentation/read-me.html">Read me</a>
<ul>
<li>The first document a user will see which includes content such as installation instructions</li>
</ul>
</li>
<li><a href="documentation/../code_docs/index.html">Code</a>
<ul>
<li>Documenting the code itself such that contributors know how to interact with it</li>
</ul>
</li>
<li><a href="documentation/../code_docs/specification.html">Specification</a>
<ul>
<li>Presenting technical (or non-technical) information about your project</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="read-me"><a class="header" href="#read-me">Read me</a></h1>
<p>The <code>README.md</code> is likely to be the first file that a user sees therefore from the perspective of a user there are certain expectations that need to be met.</p>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>A user needs to know what the library is and what it does. The content in this section should be a brief overview of what the library can do and it should not touch on any technical aspects such as the implementation details.</p>
<p>Once a user has an idea of what they are getting into they can move onto the next section.</p>
<h2 id="quickstart"><a class="header" href="#quickstart">Quickstart</a></h2>
<p>The quickstart should inform the user where the library is supported (e.g. the operating system), and has been tested to work, before moving onto the installation and removal instructions.</p>
<p>A user should be able to easily install, use, and potentially remove your library to create a good experience.</p>
<h2 id="miscellaneous"><a class="header" href="#miscellaneous">Miscellaneous</a></h2>
<p>This &quot;section&quot; can be a number of sections which the authors of the library think the user may be interested in.</p>
<p>Some information may include:</p>
<ul>
<li>Links to documents such as contributing guides, blogs, socials etc.</li>
<li>Ways to support the library</li>
<li>Known issues</li>
</ul>
<p>There is a variety of content that may be added, however, it's important to note that this is the first document a user will see and thus should not be overloaded with information. If the user can learn a little about the library, use it, and find links to additional content then the document has achieved its purpose.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="code"><a class="header" href="#code">Code</a></h1>
<p>Documenting code is an important skill to have because it conveys information to developers about the intention and usage of the library.</p>
<p>In the following sections we'll take a look at three ways of documenting code and a code style guide.</p>
<!-- no toc -->
<ul>
<li><a href="code_docs/abi.html">ABI Documentation</a></li>
<li><a href="code_docs/comments.html">Comments</a></li>
<li><a href="code_docs/naming-components.html">Naming Components</a></li>
<li><a href="code_docs/style.html">Style Guide</a></li>
</ul>
<p>For general documentation refer to how <a href="https://doc.rust-lang.org/rustdoc/how-to-write-documentation.html">Rust</a> documents code.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="abi-documentation"><a class="header" href="#abi-documentation">ABI Documentation</a></h1>
<p>ABI documentation refers to documenting the interface that another developer may be interested in using.</p>
<p>The form of documentation we focus on uses the <code>///</code> syntax as we are interested in documenting the <code>ABI</code> functions.</p>
<p>In the following snippet, we provide a short description about the functions, the arguments they take, and when the calls will revert. Additional data may be added such as the structure of the return type, how to call the function, etc.</p>
<pre><code class="language-sway">{{#include ../../../../code/connect_four/src/interface.sw:interface}}
</code></pre>
<br>
<p>In order to know what should be documented, the author of the code should put themselves in the position of a developer that knows nothing about the function and think about what sort of questions they may have.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="comments"><a class="header" href="#comments">Comments</a></h1>
<p>Comments are used by developers for themselves or other developers to provide insight into some functionality.</p>
<p>There are many ways to achieve the same outcome for a line of code however there are implementation tradeoffs to consider and a developer might be interested in knowing why the current approach has been chosen.</p>
<p>Moreover, it may not be immediately clear why, or what, some line of code is doing so it may be a good idea to add a comment summarizing the intent behind the implementation.</p>
<p>The following snippet looks at two items being documented using the comment syntax <code>//</code>.</p>
<ul>
<li><code>Item1</code> has poor comments that do not convey any meaningful information and it's better to not include them at all.</li>
<li><code>Item2</code> has taken the approach of describing the context in order to provide meaning behind each field</li>
</ul>
<pre><code class="language-sway">// This is bad. It's repeating the names of the fields which can be easily read
pub struct Item1 {
    /// Identifier
    id: u64,
    /// Quantity
    quantity: u64,
}

// This is better. It conveys the context of what the fields are
pub struct Item2 {
    /// Unique identifier used to retrieve the item from a vector of items held in storage
    id: u64,
    /// The number of remaining items left in production
    quantity: u64,
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="naming-components"><a class="header" href="#naming-components">Naming Components</a></h1>
<p>Documenting the interface and adding comments is important however the holy grail is writing code that is self-documenting.</p>
<p>Self-documenting code refers to code that written in such a way that a regular user who has never seen a line of code before could interpret what it is doing.</p>
<p>One of the most difficult aspects of programming is coming up with meaningful names that describe the content without being overly verbose while also not being too concise.</p>
<p>Naming components is both a skill and an art and there are many aspects to consider such as the context in which that variable may exist. In one context an abbreviated variable may be meaningful because of how fundamental that concept is while in another context it may be regarded as random characters.</p>
<p>Here are some points to consider when coming up with a name for a component.</p>
<h2 id="abbreviations"><a class="header" href="#abbreviations">Abbreviations</a></h2>
<p>Abbreviating names is a bad practice because it relies on contextual knowledge of the subject. It forces the developer to step away from their task in order to find the definition of some abbreviation or perhaps wait on a response from another developer.</p>
<p>On the other hand, common abbreviations may be meaningful for a given context and it may be detrimental to come up with a different, or long form, name to describe the content.</p>
<p>In general, a developer should take a moment to consider if an abbreviation provides more benefit than cost and how other developers may interpret that name in the given context.</p>
<p>That being said, here are some examples that should be avoided.</p>
<h3 id="single-character-names"><a class="header" href="#single-character-names">Single Character Names</a></h3>
<p>Using a single character to name a variable conveys little to no information to a developer.</p>
<ul>
<li>Is this a throw away variable?</li>
<li>What is the variable meant to represent where ever it is used?</li>
<li>Does it make sense to call it by the chosen character e.g. <code>x</code> when referring to formulas?</li>
</ul>
<h3 id="ambiguous-abbreviations"><a class="header" href="#ambiguous-abbreviations">Ambiguous Abbreviations</a></h3>
<p>A common mistake is to abbreviate a variable when it does not need to be abbreviated or when the abbreviation may be ambiguous.</p>
<p>For example, in the context of an industry that deals with temperature sensors what does the variable <code>temp</code> refer to?</p>
<ul>
<li><code>temperature</code></li>
<li><code>temporary</code></li>
<li><code>tempo</code></li>
</ul>
<p>Perhaps in the specific function it makes sense to use the abbreviation. Nevertheless, it's better to add a few more characters to finish the variable name.</p>
<h2 id="declarative-statements"><a class="header" href="#declarative-statements">Declarative statements</a></h2>
<p>When choosing a name, the name should be a statement from the developer and not a question. Statements provide a simple true or false dynamic while a variable that may be read as a question provides doubt to the intended functionality.</p>
<p>For example:</p>
<ul>
<li><code>can_change</code> -&gt; <code>authorized</code>
<ul>
<li>The &quot;can&quot; can be read as a question or a statement.</li>
<li>Is the developer asking the reader whether something can change or are they asserting that something either is or is not authorized to change?</li>
</ul>
</li>
<li><code>is_on</code> -&gt; <code>enabled</code>
<ul>
<li>&quot;is&quot; can also be read as a question posed to the reader rather than a simple declaration.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="style-guide"><a class="header" href="#style-guide">Style Guide</a></h1>
<p>Programming languages have different ways of styling code i.e. how variables, functions, structures etc. are written.</p>
<p>The following snippets present the style for writing <code>Sway</code>.</p>
<h2 id="capitalcase"><a class="header" href="#capitalcase">CapitalCase</a></h2>
<p>Structs, traits, and enums are <code>CapitalCase</code> which means each word has a capitalized first letter. The fields inside a struct should be <a href="code_docs/style.html#snake_case">snake_case</a> and <code>CapitalCase</code> inside an enum.</p>
<pre><code class="language-sway">struct MultiSignatureWallet {
    owner_count: u64,
}

trait MetaData {
    // code
}

enum DepositError {
    IncorrectAmount: (),
    IncorrectAsset: (),
}
</code></pre>
<h2 id="snake_case"><a class="header" href="#snake_case">snake_case</a></h2>
<p>Modules, variables, and functions are <code>snake_case</code> which means that each word is lowercase and separated by an underscore.</p>
<p>Module name:</p>
<pre><code class="language-sway">library;
</code></pre>
<p>Function and variable:</p>
<pre><code class="language-sway">fn authorize_user(user: Identity) {
    let blacklist_user = false;
    // code
}
</code></pre>
<h2 id="screaming_snake_case"><a class="header" href="#screaming_snake_case">SCREAMING_SNAKE_CASE</a></h2>
<p>Constants are <code>SCREAMING_SNAKE_CASE</code> which means that each word in capitalized and separated by an underscore.</p>
<pre><code class="language-sway">const MAXIMUM_DEPOSIT = 10;
</code></pre>
<h2 id="type-annotations"><a class="header" href="#type-annotations">Type Annotations</a></h2>
<p>When declaring a variable it is possible to annotate it with a type however the compiler can usually infer that information.</p>
<p>The general approach is to omit a type if the compiler does not throw an error however if it is deemed clearer by the developer to indicate the type then that is also encouraged.</p>
<pre><code class="language-sway">fn execute() {
    // Avoid unless it's more helpful to annotate
    let executed: bool = false;

    // Generally encouraged
    let executed = false;
}
</code></pre>
<h2 id="field-initialization-shorthand"><a class="header" href="#field-initialization-shorthand">Field Initialization Shorthand</a></h2>
<p>A struct has a shorthand notation for initializing its fields. The shorthand works by passing a variable into a struct with the exact same name and type.</p>
<p>The following struct has a field <code>amount</code> with type <code>u64</code>.</p>
<pre><code class="language-sway">struct Structure {
    amount: u64,
}
</code></pre>
<p>Using the shorthand notation we can initialize the struct in the following way.</p>
<pre><code class="language-sway">fn call(amount: u64) {
    let structure = Structure { amount };
}
</code></pre>
<p>The shorthand is encouraged because it is a cleaner alternative to the following.</p>
<pre><code class="language-sway">fn action(value: u64) {
    let amount = value;
    let structure = Structure { amount: value };
    let structure = Structure { amount: amount };
}
</code></pre>
<h2 id="getters"><a class="header" href="#getters">Getters</a></h2>
<p>Getters should not follow the pattern of <code>get_XYZ()</code> and instead should follow <code>XYZ()</code>.</p>
<pre><code class="language-sway">// Discouraged style
fn get_maximum_deposit() -&gt; u64 {
    MAXIMUM_DEPOSIT
}

// Encouraged style
fn maximum_deposit() -&gt; u64 {
    MAXIMUM_DEPOSIT
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="specification"><a class="header" href="#specification">Specification</a></h1>
<p>A specification is a document which outlines the requirements and design of the library. There are many ways to structure a specification and this number only grows when considering the industry and target audience.</p>
<p>For simplicity, a specification can be broken into two levels of detail and the one you choose depends on your target audience.</p>
<h2 id="non-technical-specification"><a class="header" href="#non-technical-specification">Non-technical specification</a></h2>
<p>A non-technical specification is aimed at an audience that may not have the expertise in an area to appreciate the technical challenges involved in achieving the goals and thus it can be seen as an overview or summary.</p>
<p>As an example, this may be a developer explaining how a user would interact with the user interface in order to send a coin / asset to someone, without revealing the functionality behind signing a transaction and why a transaction may take some amount of time to be confirmed.</p>
<p>This type of specification is simple so that any layperson can follow the basic concepts of the workflow.</p>
<h2 id="technical-specification"><a class="header" href="#technical-specification">Technical specification</a></h2>
<p>A technical specification is aimed at users that may be regarded as experts / knowledgeable in the area. This type of specification typically assumes the reader understands the basic concepts and dives into the technical aspects of how something works, step-by-step.</p>
<br>
<blockquote>
<p><strong>Note:</strong> Diagrams are a fantastic visual aid no matter the level of detail</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<p>Testing is a large topic to cover therefore this section will only cover some points that are followed in the repository.</p>
<h2 id="file-separation"><a class="header" href="#file-separation">File Separation</a></h2>
<p>There are three components to the tests and they have the following structure.</p>
<pre><code class="language-sway">tests/
└── src/
    └── my_library/
        ├── functions/
        |     └── 1 file per ABI function
        ├── utils/
        |     └── mod.rs
        └── harness.rs
</code></pre>
<h3 id="functions"><a class="header" href="#functions"><code>functions</code></a></h3>
<p>The <code>functions</code> directory contains 1 file per function declared in the <code>ABI</code> and all <strong>test cases</strong> (not utility / helper functions) for that function are contained within that module.</p>
<p>There are two possibilities with any function call and either the call succeeds or it reverts. For this reason each file is split into two sections:</p>
<ul>
<li><code>success</code></li>
<li><code>revert</code></li>
</ul>
<p>All of the tests where the function does not revert should be contained inside the <code>success</code> case while the reverting calls (panics) should be contained inside the <code>revert</code> module.</p>
<h3 id="utils"><a class="header" href="#utils"><code>utils</code></a></h3>
<p>The <code>utils</code> directory contains utility functions and abstractions which allow the tests in the <code>functions</code> directory to remain small, clean and &quot;DRY&quot; (do not repeat yourself).</p>
<p>This can be achieved by separating content into files, internally creating modules in <code>mod.rs</code> or a mixture of both.</p>
<p>The repository follows the pattern of putting utility functions in <code>mod.rs</code> and separating them internally into <code>ABI</code> wrappers and test helpers. The <code>ABI</code> wrappers are functions which directly call the contract function with the arguments passed in while the test helpers are general utility functions such as creating a new contract instance for a new test etc.</p>
<h3 id="harnessrs"><a class="header" href="#harnessrs"><code>harness.rs</code></a></h3>
<p>The <code>harness</code> file is the entry point for the tests, and thus it contains the <code>functions</code> and <code>utils</code> modules. This is what is executed when <code>cargo test</code> is run.</p>
<h2 id="testing-suggestions"><a class="header" href="#testing-suggestions">Testing Suggestions</a></h2>
<!-- TODO: this is a mess and it should be cleaned up and categorized at some point-->
<p>Here are some tips on how to approach testing:</p>
<ul>
<li>Similar to <a href="testing/../library-quality/code-structure.html">code structure</a> content, each file should be ordered alphabetically, with one exception, so that it's easy to navigate
<ul>
<li>Test conditions in the order in which they may occur
<ul>
<li>If a test has multiple assertions then the first assertion should be tested first, second assertion second etc.</li>
</ul>
</li>
</ul>
</li>
<li>Check the code coverage
<ul>
<li>All assertions &amp; requirements should be tested</li>
<li>Check boundary conditions to see if the values passed in work throughout the entire range</li>
</ul>
</li>
<li>There should be positive and negative test cases meaning that a test should pass with correct data passed in but it should also revert when incorrect data is used</li>
<li>When writing a test that changes state the test should first assert the initial condition before performing some operation and then testing the outcome of that operation
<ul>
<li>If the initial condition is not proven to be what is expected then there is no guarantee that the operation has performed the correct behavior</li>
<li>This also means that the initial condition should be compared to the post condition</li>
</ul>
</li>
<li>Comments should only be added to explain sections of each test if they provide insight into some complex behavior
<ul>
<li>If a function sets up the initial environment then there is no point in adding a comment &quot;set up the environment&quot; because the function name should be clear enough e.g. <code>fn setup()</code></li>
</ul>
</li>
<li>Any tests that are ignored should be documented in the test so that the reader knows why something is currently unimplemented
<ul>
<li>Do not leave in commented out tests. <code>#[ignore]</code> them</li>
</ul>
</li>
<li>Unit tests should remain as unit tests
<ul>
<li>Do not bundle multiple different checks into one test unless it becomes semantically meaningless when separating them</li>
</ul>
</li>
<li>Checking that a behavior continues to work more than once may be necessary at times
<ul>
<li>If a user can deposit then there should be a test to see that they can deposit more than once</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pull-requests"><a class="header" href="#pull-requests">Pull Requests</a></h1>
<p>A pull request is a term used to identify when a piece of work is ready to be pulled into and merged with another piece of work. This functionality is especially useful when collaborating with others because it allows a review process to take place.</p>
<p>In order to create a high quality pull request there are a couple areas that need to be considered:</p>
<ul>
<li><a href="pull-requests/commit.html">Committing your work</a>
<ul>
<li>How to incrementally save your work</li>
</ul>
</li>
<li><a href="pull-requests/creating-pr.html">Creating a pull request</a>
<ul>
<li>How to request a review</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="committing-your-work"><a class="header" href="#committing-your-work">Committing your work</a></h1>
<p>A <code>commit</code> can be thought of as a snapshot in time which captures the difference between the snapshot that is currently being made and the previous snapshot.</p>
<p>When creating a snapshot there are some points to consider in order to keep a high quality log:</p>
<ul>
<li>The quantity of work between commits</li>
<li>Grouping work by task / concept</li>
<li>The message used to track the changes between commits</li>
</ul>
<h2 id="quantity-of-work"><a class="header" href="#quantity-of-work">Quantity of Work</a></h2>
<p>The amount of work done per commit is dependent upon the task that is being solved however there is a general rule to follow and that is to avoid the extremes of committing everything at once or committing every minor change such as a typo.</p>
<p>The reason for not committing all of the work at once is twofold:</p>
<ul>
<li>When a fault occurs which leads to a loss of work then all of that work is lost</li>
<li>If a section of work needs to be reverted then everything must be reverted</li>
</ul>
<p>Similarly, small commits should be avoided because:</p>
<ul>
<li>A lot of commits may be considered as spam and may be difficult to parse</li>
</ul>
<h2 id="categorization"><a class="header" href="#categorization">Categorization</a></h2>
<p>Categorizing commits into issues being resolved allows us to easily scope the amount of work per commit. With appropriate categories the likelihood of too much, or not enough, work being committed is reduced.</p>
<p>An example could be a failing test suite which includes multiple functions that were re-written. In this instance it may be a good idea to fix a test, or a test suite, for one specific function and committing that work before moving onto the next.</p>
<p>This creates a clear separation within the task of fixing the test suites by fixing one suite in one commit and another in another commit.</p>
<h2 id="commit-messages"><a class="header" href="#commit-messages">Commit Messages</a></h2>
<p>Once the issue has been resolved it's time to write a message that will distinguish this commit from any other.</p>
<p>The commit message should be a concise and accurate summary of the work done:</p>
<ul>
<li><code>Good commit message:</code>
<ul>
<li>Fixed precondition in <code>withdraw()</code> which allowed draining to occur</li>
</ul>
</li>
<li><code>Bad commit message:</code>
<ul>
<li>Fix</li>
<li>Fixed function</li>
<li>Fixed an assertion where a user is able to repeatedly call the <code>withdraw()</code> functions under an edge case which may lead to the contract being drained</li>
</ul>
</li>
</ul>
<p>More information about commit messages may be found in:</p>
<ul>
<li>The README from <a href="https://github.com/joelparkerhenderson/git-commit-message/#git-commit-message">joelparkerhenderson</a></li>
<li>The <a href="https://medium.com/swlh/writing-better-commit-messages-9b0b6ff60c67">Medium article</a> by Apurva Jain</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-a-pull-request"><a class="header" href="#creating-a-pull-request">Creating a pull request</a></h1>
<p>There are two types of pull requests and depending on which one is chosen it will convey a different intent to the authors.</p>
<p>A <code>regular</code> pull request is for when the author of the pull request is satisfied with the work done and believes that the author(s) of the library should perform a review in preparation of merging the work into some branch.</p>
<p>A <code>draft</code> pull request indicates that work is currently in progress and not ready for review.</p>
<h2 id="when-to-create-a-pull-request"><a class="header" href="#when-to-create-a-pull-request">When to create a pull request</a></h2>
<p>There are two approaches that can be taken:</p>
<ul>
<li>A pull request can be made when the task is deemed to be completed</li>
<li>A <code>draft</code> pull request can be created after the first commit in order to allow for easy tracking of the progress</li>
</ul>
<p>Which one should be chosen may come down to preference or the contributing guide of a library. That being said, the benefit of creating and working on a <code>draft</code> is that it makes it easier to spot the request and thus early comments may be left which provide additional support.</p>
<h2 id="how-to-structure-a-pull-request"><a class="header" href="#how-to-structure-a-pull-request">How to structure a pull request</a></h2>
<p>Depending on the account permissions and where the pull request is being made, there may be some features that are unavailable. For example, an external contributor may not be able to set a label to categorize the request.</p>
<p>There are at least five sections to consider when creating a pull request:</p>
<!-- no toc -->
<ul>
<li><a href="pull-requests/creating-pr.html#the-title">The Title</a></li>
<li><a href="pull-requests/creating-pr.html#the-description">The Description</a></li>
<li><a href="pull-requests/creating-pr.html#the-reviewers">The Reviewers</a></li>
<li><a href="pull-requests/creating-pr.html#the-labels">The Labels</a></li>
<li><a href="pull-requests/creating-pr.html#the-issues">Linked Issues</a></li>
<li><a href="pull-requests/creating-pr.html#merging-the-pull-request">Merging the Pull Request</a></li>
</ul>
<h3 id="the-title"><a class="header" href="#the-title">The Title</a></h3>
<p>It's important to provide a title that accurately identifies the work that is being done. This is easy if there is an issue, even more so if the issue is described well, as the title can be directly copy and pasted from the issue. This allows for a one-to-one mapping of an issue to pull request which makes it easy to spot when an issue is ready to be merged.</p>
<h3 id="the-description"><a class="header" href="#the-description">The Description</a></h3>
<p>The information in the pull request should be structured neatly through the use of headings, bullet points, screenshots etc. because this makes it easier to immediately see the changes rather than having to parse through one large paragraph.</p>
<p>Some ideas for sections are:</p>
<ul>
<li>The changes that have been made and the motivation behind them</li>
<li>Limitations</li>
<li>Assumptions</li>
<li>Future work if the pull request is part of an epic (set of tasks / issues)</li>
</ul>
<h3 id="the-reviewers"><a class="header" href="#the-reviewers">The Reviewers</a></h3>
<p>If the library is managed well then a contributor does not have to think about who should review their work because it will be automatically filled in for them. This is done through the use of a <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners">code owners</a> file.</p>
<p>If that is not the case then the contributor will need to figure out the correct author(s) for code review and select them (if permissions allow it) or the request will be without any reviews until an author spots the request and assigns someone.</p>
<h3 id="the-labels"><a class="header" href="#the-labels">The Labels</a></h3>
<p>If there is an issue which is well managed then the labels for that issue can be set on the pull request (if permissions allow it) otherwise an author may need to set the labels if they choose to.</p>
<h3 id="the-issues"><a class="header" href="#the-issues">The Issues</a></h3>
<p>If there is an issue that the pull request is working off of then it's a good practice to reference that issue so that it gets closed automatically when the pull request is merged. This can be done via the user interface or by reference in the description using a <a href="https://docs.github.com/en/issues/tracking-your-work-with-issues/linking-a-pull-request-to-an-issue">closing keyword</a>.</p>
<p>For example, issue number <code>123</code> would be referenced in the description as <code>closes #123</code>.</p>
<p>Additionally, referencing the issue that the pull request is based on allows the reviewer to easily click on the link which will take them to the issue. This makes it easy to see the problem in detail and any discussion that occurred.</p>
<h3 id="merging-the-pull-request"><a class="header" href="#merging-the-pull-request">Merging the Pull Request</a></h3>
<p>Once the request has received enough approvals from the authors then either the authors or the contributor may merge the work in. When attempting to merge there may be an option to <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/about-pull-request-merges#squash-and-merge-your-commits">squash</a> the commits. It's a good idea to delete the previous commits in the optional description so that a single message summarizes the entire work that has been done. This makes it easier to parse the commit history.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
